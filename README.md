# Стратификация и постстратификация в A/B-тесте

## Описание проекта
Был проведён A/B-тест, связанный с монетизацией экранов платных услуг автоклассифайда. Основная гипотеза: внедрение нового подхода позволит увеличить **ARPU** (Average Revenue Per User) на **+3.5 рубля**.  
В проекте рассматриваются методы **стратификации** и **постстратификации** для повышения точности оценки эффекта.  

---

## Описание данных
Данные содержат информацию о пользователях и их доходности:  

- **`ARPU`** — целевая метрика в тесте (выручка на пользователя)  
- **`is_capital`** — продавец из столицы (capital) или регионов (region)  
- **`is_pro`** — профессиональный продавец (1) или обычный (0)  
- **`group`** — принадлежность к группе:  
  - `0` — контрольная  
  - `1` — тестовая  

---

## Методология
1. **Формулировка гипотез**  
   - **H0**: ARPU в контрольной и тестовой группах одинаков.  
   - **H1**: В тестовой группе ARPU выше, чем в контрольной, минимум на +3.5 рубля.  

2. **Методы анализа**  
   - Проверка гипотезы через **t-test**.  
   - Стратификация по ключевым признакам:  
     - `is_capital`  
     - `is_pro`  
   - Оценка дисперсии в стратах.  
   - Применение **постстратификации** для повышения точности оценки.  
   - Анализ влияния стратификации на **размер выборки**.  

---

## Анализ
- При применении **t-теста** без стратификации дисперсия метрики была выше.  
- Стратификация показала, что:  
  - по признаку **`is_capital`** дисперсия сокращается сильнее всего,  
  - по признаку **`is_pro`** сокращение дисперсии менее выражено.  
- Постстратификация дополнительно позволяет снизить ошибку оценки эффекта.  

---

## Выводы
- Стратификация по признаку **столица/регион** наиболее эффективно уменьшает дисперсию.  
- Постстратификация помогает скорректировать результаты и повысить статистическую мощность.  
- Применение стратификации позволяет:  
  - **сократить размер выборки**, необходимой для теста,  
  - **увеличить точность оценки эффекта**.  

---
